General Description

	fIcy is an icecast/shoutcast stream grabber for use under shell
	environment. Its goal is to cleanly and automatically rip a stream
	into user customisable files.  It will work with any ICY compatible
	stream, allowing you to either to save the stream to disk or to pipe
	the output to a media player, or even both.

	The fIcy package includes the little utility fResync, which attempts
	to truncate a badly cut MPEG file (such as the ones produced by fIcy)
	to frame boundaries, to eliminate decoding warnings and noises.


Files

	These files can be found in the latest release of fIcy

	AUTHORS		People that have contributed to fIcy.
	NEWS		Release changes.
	COPYING		License. Please read carefully.
	README		This file. Contains usage description.
	TODO		Missing/Planned improvements.


Usage

	fIcy [options] <server [port [path]]|url>

	fPls [options] <file|url> [fIcy options]

	fResync [options] file


fIcy options

	-d		Do not dump the output to stdout.
			Useful when only ripping.

	-e		Enumerate number of ripped files when song metadata
			changes. Uses -o as prefix.

	-h		Help

	-c		Do not clobber files.

	-i		Do not clobber files but abort when trying to do so
			(-c is implicit).

	-m		Use song title [metadata] when naming files. Uses -o as
			prefix.

	-n		If the file exists create new one with .n as suffix.

	-p		When duping consider writing errors as transient.
			Useful when you pipe the output to a media player and
			want to kill it while not interrupting the rip.

	-o <file>	Dump the output to file.
			Hint: to dump without a prefix use "./"

	-s <suffix>	Use sfx as a suffix for new files.
			Hint: the .mp3 extension is NOT implicit.

	-t		Display song title [metadata] while ripping.

	-r		Remove/don't save partial chunks. This will skip the
			first chunk and remove the last one upon
			termination which are (supposedly) incomplete. To use
			in combination with -m or -e.

	-q <file>	Append file sequence list to file. This may be used to
			rejoin splitted parts with an external tool. fResync
			will use this file in the future.

	-x <regex>	Save only files whose title (NOT filename) matches
			against this (or one of these) extended regular
			expressions. Multiple -x can be specified on the
			command line to form OR conditions. Duping unaffected.
			Can be combined with -X.

	-X <regex>	Do NOT save files whose title matches against this
			extended regular expression. Same semantics as -x.


fResync options

	-b		By default fResync maps the entire file into memory
			when operating. However this can create problems on
			loaded systems with large files or when simulating.
			This reverts to a buffered I/O mode. This flag is also
			implicit when simulating.

	-s		Simulate the process. Print on the standard output
			the starting sync offset and stream length, but don't
			modify the source file.

	-v		Verbose.

	-n frames	Require/decode at least n valid consecutive frames to
			validate the sync offset. Defaults to 6.

	-m len		Maximum frame length. Defaults to 1597. fResync uses
			this value to determine the maximal region of the file
			to be checked.

fPls options

	-P path		Specify a different name or full path for the fIcy
			executable (defaults to "fIcy").

	-v		Verbose.

	-R max		Specifies the maximal number of retries to do for
			each stream upon connection/read failure.

	-L max		Specifies the maximal number of loops to do for
			the entire playlist (-1 for infinite).

	-T sec		Wait time (in seconds) to pause after each failure.


Examples

	Use fIcy to display ICY titles while playing:

		fIcy -t 123.123.123.123 8080 | mpg123 -

	Rip an .mp3 stream using metadata as filename, with server:port
	and /path:

		fIcy -s .mp3 -o ./ -md 123.123.123.123 8080 /path/to/stream
	
	Rip an .mp3 stream and play it using mpg123, allowing mpg123
	to be killed anytime:

		fIcy -s .mp3 -o ./ -mp 1.2.3.4 8080 /path/to/stream | mpg123 -

	Same as above, but allows the player to be restarted later by using
	a named fifo (note that you can later open "fifo" with any player):

		$ mkfifo fifo
		$ fIcy -p ... > fifo
		$ mpg123 fifo
		EOF

	URL parsing examples. Both "icy" and "http" are recognised as
	valid protocols, as well as nothing:

		fIcy -t icy://a.radio.invalid:8888/ | mpg123 -

		fIcy -t http://example.com/radio | mpg123 -

	Rip a station using a playlist instead of direct connection to the
	stream, supporting failures and multiple fall-back streams:

		fPls -L-1 http://netradio.invalid/listen.pls -s.mp3 -o./ -cmrd

	Cleanup a ripped and/or damaged mp3 file:

		fResync file.mp3


Companion software:

	bfr <http://www.glines.org:8000/software/buffer.html>:
		Audio-oriented rebuffering tool. Ideal for lousy streams.

	mpgedit <http://www.mpgedit.org/>
		Frame-level mp3 cutting tool.

	Combining these in the right pipeline order is left as an exercise to
	the user.


DISCLAIMER

	We would like to remind you that saving public streams without paying
	the rights is *ILLEGAL* unless explicitly stated.


Notes

	The output files produced by fIcy may miss audio framing informations
	and headers since the separation does not consider the audio data. For
	this reason, your player may fail to reproduce the dump: this is
	expected. fResync can be used to cleanup MPEG files after processing.

	You can also use other tools such as mpgedit for cutting the file in
	arbitrary positions without diminishing the quality. Assuming that your
	song spans across three files (use -q to know which ones), that's how
	to proceed:

		cat 1.mp3 2.mp3 3.mp3 > temp.mp3
		xmpgedit temp.mp3

	Do NOT resync the files if you're going to post-process them this way:
	fResync would remove at least one boundary frame on each file, while
	other tools could also insert extra empty frames to silence the
	decoder!

	For bugs, support, documentation or simply suggestions contact the main
	developer: wave++ <wavexx@users.sf.net>. Our "Concept Developer": SethX
	<sethx@users.sf.net> has been downsized to QA and testing (blame him
	for each bug). The fIcy project is located at http://ficy.sf.net/
	A general support mailing list is hosted on source-force here
	http://sourceforge.net/mail/?group_id=104571


Installation

	fIcy comes with a very simple Makefile that should work on any system
	using gcc, or IRIX. GNU make or pmake is required. Documentation is
	generated from these files using ohg.

	If you need to use a different compiler (for example on OpenBSD), you
	can call make as follows:

		CXX="eg++" make -e

	instead of changing manually the Makefile. Please note that, when using
	gcc, at least g++ >= 3 is required to compile fIcy.

	There's no "make install" target. Instead you should copy the generated
	executables into the final path, usually doing:

		cp fIcy fPls fResync /usr/local/bin

	Also note that, for "fPls" to work, fIcy must be already installed.
